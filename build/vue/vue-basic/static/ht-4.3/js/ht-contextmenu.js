!function(x,q){"use strict";var J="ht",E=x[J],L="position",t="absolute",j="px",g="left",Q="top",Z="innerHTML",c="className",f="width",d="height",w="0",I="▶",X="display",n="none",M="visibility",l="user-select",b="margin",W="padding",o=null,r=E.Color,Y=E.Default,H=Y.getInternal(),i=x.setTimeout,h=x.setInterval,G=x.clearTimeout,z=x.clearInterval,N=x.parseInt,D=Y.isLeftButton,K=Y.isDragging,s=Y.startDragging,V=Y.getDistance,B=Y.isTouchable,U=r.widgetIconHighlight,A=r.widgetIconBorder,v=r.widgetIconGradient,a=function(){return document},P=function(h,$){return h.querySelectorAll($)},C=function($,d){var x=a().createElement($);return"ul"===$&&(R(x,L,"relative"),R(x,b,w),R(x,W,w),R(x,"list-style",n),R(x,"box-sizing","border-box"),R(x,"-moz-box-sizing","border-box"),R(x,X,"inline-block"),R(x,"vertical-align","text-bottom"),R(x,"border","1px solid "+Y.contextMenuBorderColor),R(x,"box-shadow","0 0 16px 1px "+Y.contextMenuShadowColor),R(x,"overflow","hidden"),d||R(x,"border-radius",5+j)),x},y=function(Q){var x=Q.touches[0];return x?x:Q.changedTouches[0]},u=function(){return C("div")},S=function(){return C("canvas")},R=function(H,v,Z){H.style.setProperty(v,Z,o)},_=function(F,m,h){Y.def(E.widget[F],m,h)},k=function(_,I){_.appendChild(I)},m=function(Q,I){Q.removeChild(I)},$=function(){return a().body},p=function(G,i,p,U){G.addEventListener(i,p,!!U)},F=function(i,o,J,O){i.removeEventListener(o,J,!!O)};H.addMethod(Y,{contextMenuCheckIcon:{width:16,height:16,comps:[{type:"border",rect:[1,1,14,14],width:1,color:A},{type:"shape",points:[13,3,7,12,4,8],borderWidth:2,borderColor:U}]},contextMenuRadioIcon:{width:16,height:16,comps:[{type:"circle",rect:[2,2,12,12],borderWidth:1,borderColor:A},{type:"circle",rect:[4,4,8,8],borderWidth:1,borderColor:U,gradient:Y.imageGradient,gradientColor:v,background:U}]},contextMenuLabelFont:(B?"16":"13")+"px arial, sans-serif",contextMenuLabelColor:"#000",contextMenuBackground:"#fff",contextMenuDisabledLabelColor:"#888",contextMenuHoverBackground:"#648BFE",contextMenuHoverLabelColor:"#fff",contextMenuSeparatorWidth:1,contextMenuSeparatorColor:"#E5E5E5",contextMenuScrollerColor1:"#FDFDFD",contextMenuScrollerColor2:"#D3D3D3",contextMenuScrollerBorderColor:"#C3C3C3",contextMenuBorderColor:"#C3C3C3",contextMenuShadowColor:"rgba(128, 128, 128, 0.5)"},!0);var e=function(U){var X=this,z=U._view;if(X.$11b=U,X.addListeners(),p(z,"contextmenu",function(b){b.preventDefault()}),!B){var J=X.$37b=X.$36b.bind(X);p(z,"mouseover",J),p(z,"mouseout",J)}};Y.def(e,q,{ms_listener:1,getView:function(){return this.$11b._view},handle_touchstart:function(V){if(Y.preventDefault(V),D(V)){for(var o=this,J=o.$11b,Q=o.getView(),X=Q.children,l=0;l<X.length;l++){var I=X[l],m=I.$24b,E=I.$25b;if(m&&m.contains(V.target))return J.scrollUp(I),o.$28b=i(function(){o.$29b=h(function(){J.scrollUp(I)},100)},500),s(o,V),void 0;if(E&&E.contains(V.target))return J.scrollDown(I),o.$28b=i(function(){o.$29b=h(function(){J.scrollDown(I)},100)},500),s(o,V),void 0}B&&(V=y(V)),o.$30b={x:V.pageX,y:V.pageY}}},handle_mousedown:function(L){this.handle_touchstart(L)},handle_touchend:function(w){if(D(w)){var j=this,R=j.$30b,N=B?{x:y(w).pageX,y:y(w).pageY}:{x:w.pageX,y:w.pageY};if(!R||V(R,N)>1)return delete j.$30b,void 0;for(var F=j.getView(),m=j.$11b,W=w.target,b=o,t=o,x=m._items,u=F.$26b,X=0;X<u.length;X++)if(t=u[X],t.contains(W)){b=t.getAttribute("data-id");break}if(b&&x){var r=m.$17b(x,function(R){return R._id===b});if(r){var a=!1;r.disabled instanceof Function?a=r.disabled.call(m,r):r.disabled===!0&&(a=!0),a||(r.items?B&&j.$36b(t,!0):m.$1b(r,w))}}delete j.$30b}},$36b:function(i,L){if(!K()){var F,I=this,y=I.$11b,u=I.getView(),O=y.$20b||u.children[0],q=y.$19b,N=u.$26b,f=u.children,r=i.target,E=u.getBoundingClientRect(),w=Y.getWindowInfo(),t=w.width,J=w.height,W=function(S){for(var W=0;W<f.length;W++){var e=f[W],E=new RegExp(S+"$"),N=e[c];if(N&&(E.test(N)||N.indexOf(S+" ")>=0))return e}},C=function(_){for(var E=0;E<N.length;E++){var K=N[E],A=new RegExp(_+"$"),u=K[c];if(u&&(A.test(u)||u.indexOf(_+" ")>=0))return K}},h=function(M){var _=C("menu-item"+M.$45b),k=_.getBoundingClientRect(),m=k.top-E.top,e=k.left-E.left;R(M,Q,m+j),R(M,g,e+k.width+j);var V=M.getBoundingClientRect(),i=V.top,O=V.left,K=V.height,c=V.width,s=i+K+2,v=O+c+2;s>J&&R(M,Q,m+J-s+j),v>t&&R(M,g,e-c+j)};if(L)F=i;else{if("mouseover"===i.type){for(var B=0;B<N.length;B++){var H=N[B];if(H.contains(r)){F=H;break}}if(!F&&q){var d=q.parentNode,G=W("submenu"+q.getAttribute("data-id"));(G&&G.contains(r)||d&&d.contains(r))&&(F=q)}}else if("mouseout"===i.type){for(var P=!1,V=i.relatedTarget,B=0;B<f.length;B++){var D=f[B];if("hidden"!==D.style.visibility&&D.contains(V)){P=!0;break}}if(P)return}!F&&O&&(F=C("menu-item"+(O.$45b||"NaN")))}if(F!=q){if(q)for(var n=q;n;){n[c]=n[c].replace(" menu-item-hover",""),n[c].indexOf("disabled")<0&&(R(n,"background-color",Y.contextMenuBackground),R(n,"color",Y.contextMenuLabelColor));var x=W("submenu"+n.getAttribute("data-id"));x&&R(x,M,"hidden");var b=n.parentNode;n=C("menu-item"+(b.$45b||"NaN"))}if(F){for(var _=F,m=[];_;){_[c]+=" menu-item-hover",_[c].indexOf("disabled")<0&&(R(_,"background-color",Y.contextMenuHoverBackground),R(_,"color",Y.contextMenuHoverLabelColor));var p=W("submenu"+_.getAttribute("data-id"));p&&(R(p,M,"visible"),m.push(p));var b=_.parentNode;_=C("menu-item"+(b.$45b||"NaN"))}m.reverse(),m.forEach(function(l){h(l)})}}y.$19b=F,y.$20b=F?F.parentNode:u.children[0]}},handle_mouseup:function(M){this.handle_touchend(M)},handleWindowTouchEnd:function(){var e=this;e.$28b!=o&&(G(e.$28b),delete e.$28b),e.$29b!=o&&(z(e.$29b),delete e.$29b),delete e.$34b,delete e.$30b,delete e.$35b},handleWindowMouseUp:function(Y){this.handleWindowTouchEnd(Y)},handle_mousemove:function(D){this.handle_touchmove(D)},handle_touchmove:function(M){if(!K()&&D(M)){for(var R=this,v=R.getView().children,a=o,l=0;l<v.length;l++){var J=v[l];if(J.contains(M.target)){a=J;break}}var w=R.$30b,Z=B?{x:y(M).pageX,y:y(M).pageY}:{x:M.pageX,y:M.pageY};a&&w&&V(w,Z)>2&&(s(R,M),R.$34b=a,R.$35b=a.$18b)}},handleWindowTouchMove:function(P){var a=this,K=a.$11b,C=a.$34b,l=a.$35b,x=a.$30b;if(x&&C){var j=B?{x:y(P).pageX,y:y(P).pageY}:{x:P.pageX,y:P.pageY},r=j.y-x.y;r>0?K.scrollUp(C,C.$18b-(l-r)):K.scrollDown(C,l-r-C.$18b)}},handleWindowMouseMove:function(o){this.handleWindowTouchMove(o)},$10b:function(J,G){J.preventDefault();for(var c=this,q=c.getView().children,t=o,X=0;X<q.length;X++){var d=q[X];if(d.contains(J.target)){t=d;break}}if(t){var u=this.$11b,v=u.getRowHeight();Math.abs(G)>.05&&(G>0?u.scrollUp(t,G*v):0>G&&u.scrollDown(t,-G*v))}},handle_mousewheel:function(U){this.$10b(U,U.wheelDelta/40)},handle_DOMMouseScroll:function(h){this.$10b(h,-h.detail)},$44b:function(s){this.getView().contains(s.target)||this.$11b.hide()},$41b:function(n){this.$11b.show(n)},$4b:function(_,K){var B=this.$11b;if(K=K||B._items,K&&K.length&&_.keyCode){var M=[_.keyCode];_.shiftKey&&M.push(16),_.ctrlKey&&M.push(17),_.altKey&&M.push(18),/mac/.test(x.navigator?x.navigator.userAgent.toLowerCase():"")?_.metaKey&&M.push(17):_.metaKey&&M.push(91),M.sort();var z=M.join(),G=B.$17b(K,function(S){if(S.key){var H=S.key.slice(0);return H.sort(),z===H.join()}});if(G){G.preventDefault!==!1&&_.preventDefault();var F=!1;G.disabled instanceof Function?F=G.disabled.call(B,G):G.disabled===!0&&(F=!0),F||B.$1b(G,_)}}},$39b:function(o){var W=this,h=y(o);W.$32b={x:h.pageX,y:h.pageY}},$38b:function(Y){var $=this,K=y(Y);$.$31b={x:K.pageX,y:K.pageY},$.$33b=i(function(){$.$31b&&($.$32b?V($.$31b,$.$32b)<10&&$.$11b.show(Y):$.$11b.show(Y)),delete $.$33b,delete $.$31b,delete $.$32b},600)},$40b:function(){var b=this;b.$33b!=o&&(G(b.$33b),delete b.$33b,delete b.$31b,delete b.$32b)}}),E.widget.ContextMenu=function(H){var b=this,j=b._view=u();j[c]="ht-widget-contextmenu",b.setItems(H),b.$13b=new e(b),R(j,"font",Y.contextMenuLabelFont),R(j,L,t),R(j,"cursor","default"),R(j,"-webkit-"+l,n),R(j,"-moz-"+l,n),R(j,"-ms-"+l,n),R(j,l,n),R(j,"box-sizing","border-box"),R(j,"-moz-box-sizing","border-box"),Y.baseZIndex!=o&&R(j,"z-index",N(Y.baseZIndex)+2+""),b.$3b=function($){b.$13b.$4b($)}},_("ContextMenu",q,{$5b:0,_items:o,$21b:o,_enableGlobalKey:!1,ms_v:1,enableGlobalKey:function(){var l=this,G=l._enableGlobalKey;G===!1&&(p(a(),"keydown",l.$3b),l._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,F(a(),"keydown",this.$3b)},setItems:function(K){this._items=K},setVisibleFunc:function(_){this.$16b=_},setLabelMaxWidth:function(K){this.$43b=K},$1b:function(i,Q){var N=this;if("check"===i.type)i.selected=!i.selected;else if("radio"===i.type){var O=i.groupId;N.$17b(N._items,function(B){B.groupId===O&&(B.selected=!1)}),i.selected=!0}if(N.hide(),i.action)i.action.apply(i.scope||N,[i,Q]);else if(i.href){var $=i.linkTarget||"_self";x.open(i.href,$)}},getItemByProperty:function(f,_,i){var q=this;if(i=i||q._items,!i||0===i.length)return o;var c=q.$17b(i,function(n){return n[f]===_});return c||o},scrollUp:function(y,A){var D=this;if(A=A==o?20:A,A=N(A),0!==A){var v=0;y.$18b>A&&(v=y.$18b-A),D.$42b(y,v),y.scrollTop=v,y.$18b=v}},scrollDown:function(S,t){var H=this;if(t=t==o?20:t,t=N(t),0!==t){var $=S.$22b,c=S.$23b,L=$-c;c+S.$18b+t<$&&(L=S.$18b+t),H.$42b(S,L),S.scrollTop=L,S.$18b=L}},$42b:function(d,C){C=C==o?d.$18b:C;var V=d.$24b,s=d.$25b;V&&(R(V,"top",C+j),0==C?R(V,X,n):R(V,X,"block")),s&&(R(s,"bottom",-C+j),C==d.$22b-d.$23b?R(s,X,n):R(s,X,"block"))},getRowHeight:function(){return this._view.querySelector(".menu-item").offsetHeight},$17b:function($,P){for(var K=0;K<$.length;K++){var x=$[K];if(P(x))return x;if(x.items){var j=this.$17b(x.items,P);if(j)return j}}},$2b:function(p,n){for(var P=this,H=0;H<p.length;H++){P.$5b++;var g=p[H];if(!P.$16b||P.$16b.call(P,g)){var v=C("li"),D=P.$5b+"";if(R(v,"white-space","nowrap"),R(v,X,"block"),"separator"===g){var K=u();K[c]="separator",R(K,d,Y.contextMenuSeparatorWidth+j),R(K,"background",Y.contextMenuSeparatorColor),k(v,K)}else{g._id=D,v.setAttribute("data-id",D);var r=C("span"),F=C("span"),z=S(),A=u();if(R(r,X,"inline-block"),R(F,X,"inline-block"),z[c]="prefix",R(z,X,"inline-block"),R(z,f,"1em"),R(z,d,"1em"),R(z,"vertical-align","middle"),R(z,b,"0 0.2em"),"check"===g.type&&g.selected?z[c]+=" check-prefix":"radio"===g.type&&g.selected&&(z[c]+=" radio-prefix"),k(v,z),g.icon){var e=S();e[c]="contextmenu-item-icon",R(e,X,"inline-block"),R(e,"vertical-align","middle"),R(e,d,"1.2em"),R(e,f,"1.2em"),R(e,"margin-right","0.2em"),e.$50b=g.icon,k(r,e)}if(F[Z]=g.label,k(r,F),k(v,r),A[c]="suffix",R(A,X,"inline-block"),R(A,"margin-left","1em"),R(A,"margin-right","0.4em"),R(A,"text-align","right"),R(A,"font-size","75%"),g.items&&(A[Z]=I),g.suffix&&(A[Z]=g.suffix),k(v,A),v[c]="menu-item menu-item"+D,R(v,"background-color",Y.contextMenuBackground),R(v,"color",Y.contextMenuLabelColor),R(v,W,"3px 0"),g.disabled instanceof Function){var m=g.disabled.call(P,g);m&&(v[c]+=" disabled",R(v,"color",Y.contextMenuDisabledLabelColor))}else g.disabled&&(v[c]+=" disabled",R(v,"color",Y.contextMenuDisabledLabelColor));if(g.items){P.$21b||(P.$21b=new E.List);var o=C("ul",P._r);o[c]="submenu"+D,o.$45b=D,R(o,M,"hidden"),R(o,L,t),k(P._view,o),P.$21b.add(o),P.$2b(g.items,o)}}k(n,v)}}},rebuild:function(){var q=this,T=q._items,t=q._view;if(t&&(t[Z]="",q.$21b=o,q.$5b=0,q.$19b=o,q.$20b=o,t.$26b=o,T&&0!==T.length)){var H=C("ul",q._r);k(t,H),q.$2b(T,H)}},addTo:function(Z){if(Z){var C=this,$=C.$13b;if(C.$12b=Z,C.$9b=function(_){$.$44b(_)},C.$27b=function(B){$.$41b(B)},B){var I=C.$6b=function(s){$.$38b(s)},l=C.$7b=function(x){$.$39b(x)},L=C.$8b=function(u){$.$40b(u)};p(Z,"touchstart",I,!0),p(Z,"touchmove",l),p(Z,"touchend",L)}else p(Z,"contextmenu",C.$27b)}},show:function(r,v,q){var J=this,q=q==o?!0:!1,C=J._view;if(C){if(J.invalidate(),1===arguments.length){var S=r;if(B){var M=y(S);r=M.pageX,v=M.pageY}else r=S.pageX,v=S.pageY}var x=Y.getWindowInfo(),W=x.width,F=x.height,D=x.left,N=x.top,I={pageX:r,pageY:v,clientX:r-D,clientY:v-N,target:1,originEvent:S},e=I.clientX,H=I.clientY,b=function(N){N.style.height=F-6+j;var x=u(),T=u(),O=function(I){R(I,L,t),R(I,"text-align","center"),R(I,f,"100%"),R(I,"font-size",10+j),R(I,"padding","2px 0"),R(I,"border","0px solid "+Y.contextMenuScrollerBorderColor),R(I,"background-color",Y.contextMenuScrollerColor1),I.style.backgroundImage="-webkit-linear-gradient(top, "+Y.contextMenuScrollerColor1+", "+Y.contextMenuScrollerColor2+")",I.style.backgroundImage="linear-gradient(to bottom, "+Y.contextMenuScrollerColor1+", "+Y.contextMenuScrollerColor2+")"};x[c]="menu-arrow-item menu-arrow-item-top",T[c]="menu-arrow-item menu-arrow-item-bottom",O(x),R(x,"top",w),R(x,"left",w),R(x,"border-bottom-width",1+j),x[Z]="▲",O(T),R(T,"bottom",w),R(T,"left",w),R(T,"border-top-width",1+j),T[Z]="▼",N.$24b=x,N.$25b=T,N.$18b=N.scrollTop,N.$22b=N.scrollHeight,N.$23b=N.clientHeight,k(N,x),k(N,T),J.$42b(N)};J.beforeShow&&J.beforeShow(I);var K=J._items;if(K&&(S&&S.preventDefault(),K.length)){J.rebuild(),k($(),C),C.$26b=P(C,".menu-item");var T=C.children[0];T.offsetHeight>F&&b(T);var U=H+(q?1:0),V=e+(q?1:0),A=function(k){for(var L=0,e=0,p=0,T=J.$43b;p<k.children.length;p++){var E=k.children[p];if(E.getAttribute("data-id")){var B=E.children[1],_=E.children[2],A=B.children;if(T){var s=A[0];A.length>1&&(s=A[1]),s.offsetWidth>T&&(s[Z]="<marquee scrollamount='3'>"+s[Z]+"</marquee>",s.children[0].style.verticalAlign="text-bottom",R(s,f,T+j),R(s,X,"inline-block"))}var y=B.offsetWidth,I=_.offsetWidth;y>L&&(L=y),I>e&&(e=I)}}for(p=0;p<k.children.length;p++){var E=k.children[p];if(E.getAttribute("data-id")){var B=E.children[1],_=E.children[2],v=B.children[0],u=B.children[1];!u&&v.style.width&&R(v,f,L+j),R(B,f,L+j),R(_,f,e+j)}}};A(T);var m=H+3+C.offsetHeight,h=e+3+C.offsetWidth;m>F?R(C,Q,U-(m-F)+N+j):R(C,Q,U+N+j),h>W?R(C,g,V-(h-W)+D+j):R(C,g,V+D+j);var d=J.$21b;d&&d.each(function(m){A(m),m.offsetHeight>F&&b(m)}),J.$9b&&p(a(),B?"touchstart":"mousedown",J.$9b,!0),J.afterShow&&J.afterShow(I),J.$47b()}}},isShowing:function(){return this._view?this._view.parentNode!=o:!1},getRelatedView:function(){return this.$12b},hide:function(){var P=this,j=P._view;j&&j.parentNode&&(m(j.parentNode,j),F(a(),B?"touchstart":"mousedown",P.$9b,!0),P.afterHide&&P.afterHide())},dispose:function(){var b=this,q=b.$12b,r=b._view;r&&(r.parentNode&&m(r.parentNode,r),b.disableGlobalKey(),q&&(B?(F(q,"touchstart",b.$6b,!0),F(q,"touchmove",b.$7b),F(q,"touchend",b.$8b)):F(q,"contextmenu",b.$27b)),b._view=b._items=b.$21b=b.$19b=b.$12b=b.beforeShow=b.afterShow=b.afterHide=b.$9b=b.$3b=b.$6b=b.$7b=b.$8b=b.$27b=o)},$46b:function(N,f,k,s){var j=H.initContext(N);H.translateAndScale(j,0,0,1),j.clearRect(0,0,k,s),Y.drawStretchImage(j,Y.getImage(f),"fill",0,0,k,s),j.restore()},$47b:function(){var A,f,F,C=this,G=C._view;if(C.isShowing()){var X=P(G,".check-prefix");for(F=0;F<X.length;F++){var V=X[F];A=V.clientWidth,f=V.clientHeight,V.$48b=A,V.$49b=f,H.setCanvas(V,A,f)}var N=P(G,".radio-prefix");for(F=0;F<N.length;F++){var O=N[F];A=O.clientWidth,f=O.clientHeight,O.$48b=A,O.$49b=f,H.setCanvas(O,A,f)}var Q=P(G,".contextmenu-item-icon");for(F=0;F<Q.length;F++){var p=Q[F];A=p.clientWidth,f=p.clientHeight,p.$48b=A,p.$49b=f,H.setCanvas(p,A,f)}}},validateImpl:function(){var k,L,h,X=this,R=X._view;if(X.isShowing()){var Q=P(R,".check-prefix");for(h=0;h<Q.length;h++){var J=Q[h];k=J.$48b,L=J.$49b,k&&L&&X.$46b(J,Y.contextMenuCheckIcon,k,L)}var x=P(R,".radio-prefix");for(h=0;h<x.length;h++){var u=x[h];k=u.$48b,L=u.$49b,k&&L&&X.$46b(u,Y.contextMenuRadioIcon,k,L)}var z=P(R,".contextmenu-item-icon");for(h=0;h<z.length;h++){var y=z[h];k=y.$48b,L=y.$49b,k&&L&&X.$46b(y,Y.getImage(y.$50b),k,L)}}}})}(this,Object);